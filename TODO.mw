== Milestone 2 ==

Documents and ideas: [[Milestone 2]] esp. [[Forest|Forest world]]

== Notes ==
'''High priority H:''' milestone goals that should be implemented for next milestone

'''Medium priority M:''' would be nice to have for next milestone, but should be secondary to high priority goals

'''Low priority L:''' things that should be fixed sometime

'''?:''' things that need to be discussed to determine whether or not they should be implemented

'''D:''' features that will be implemented but need further discussion on how to implement them

== Programming ==

=== Collision Detection ===
* '''L:''' Stacking some objects doesn't work nicely. Examples: Multiple badguys above each other, multiple rocks above each other. It might be possible to solve this by doing collision detection against old object positions instead of the new ones.
* '''?:''' There are collisions with the flame sprite while invincible. Tux can then actually stand on one

=== Code Refactoring/Cleanup/Optimisation ===
* '''L:''' implement quadtree or grid to speedup collision detection
* '''L:''' use refcounting for GameObjects and implement a remove_listener function, so that you can keep track when GameObject get added/removed to the Sector. (refcounting is needed here, otherwise we'll get into trouble when 1 of the listener objects dies before it gets notificated). Unregistering in the destructor would be an alternative solution but an error prone one.
* '''L:''' harmonize to 1 single gameloop that switches between title, worldmap, ingame mode and eventually leveleditor mode
* '''L:''' change physics class y-velocity-coordinate to be like all other y-coordinates again (positive y to go down)
* '''L:''' name files according to the classes they contain, e.g. tile_manager.* to TileManager.* because it contains a class named TileManager and not tile_manager
* '''L:''' Refactor worldmap code to run like a normal GameSession with some special GameObjects

=== Actions ===
* '''H:''' what to do when stuck under tiles (after using duck-sliding)
* '''H:''' A player that is shortly invincible after shrinking/loosing fire doesn't jump of enemies anymore
* '''H:''' Buttjump:
** re-enable buttjump
** should kill enemies with a certain range (''needs to be tweaked'')
*** eventually, enemies in a given radius should only be stunned
** animation (need images)
** should only be available when tux is big
** should break bricks if Tux is on top of bricks.
* '''H:''' Flapping:
** should be modeled after Yoshi's Island flapping
** '''?:''' check if this doesn't heavily affect gameplay
** animation (need images)
* '''H:''' Blowflyer:
** should be temporarily active for a single sector or time-limited (i.e. countdown)
** '''D:''' we don't know yet how Tux could gain that ability; probably some non-movable objects in the level (helium bottles were rejected, should be something more "abstract")
* '''?:''' the currrent grow-up animation pauses the game for too long. Either pausing for a shorter time or letting the game run while growing up might be better.

=== Scripting/Cutscenes ===
* '''H:''' add a global variable store for scripts or something like that holds information across levels/scripts and save/load cycles.
* '''H:''' create a (squirrel) script for the intro cutscene
* '''H:''' make it possible to modify the worldmap after the yeti has been defeated
* '''H:''' extract translatable strings from the scripts
* '''M:''' create a script for the yeti outro
* '''?:''' easy means of skipping and/or fast-forwarding cutscenes
* '''?:''' tux walk from the level goal into his igloo looks like he's breakdancing

=== Badguys ===
* '''H:''' bring back stay on platform flag
** might not be necessary. See the discussion on helping players predict if an enemy will stay on a platform
* '''H:''' We go into kicked mode for a short time (you hear the kick sound) before MrIceBlock gets grabbed by the player
* '''M:''' do something with the wingling
* '''?:''' do something with the tree?
* '''?:''' render Badguys that could move through tiles (flames, ghosts, dead badguys) on a higher layer so they won't disappear behind e.g. grass patches only to reappear in front of solid ground again
* '''M:''' create more and better Badguys, see [[Badguys]] for ideas

=== Objects ===
* '''H:''' Check/Fix bullet speed/behaviour
* '''H:''' Don't simply duplicate code in the following objects: PoisonIvy, SnowSnail, Spidermite?, Hatch, SkullTile
* '''H:''' Implement Ice Cube/Straw Block - a block that can be destroyed by the fire shot. Appearance depends on the world it's used in.
* '''H:''' Infobox: Don't show scroll arrows if the text is smaller than the box. Try pixelwise smooth scrolling instead of 1 line per keypress. Try to avoid scrolling textboxes anyway, players are bored if they have to read so much. Try to avoid infoboxes where possible, the game is played by lots of kids who either can't read yet or don't know english, they'll just be confused by text they can't understand.
* '''M:''' Make moving platforms move tux away/crush him when pressed against a wall
* '''M:''' add a rope object on which tux is able to climb, also add a ? block that emits a rope when hit
* '''M:''' redo trampolines
* '''L:''' add a "geysir" object: It's a fountain of water that raises in certain intervals. It can be used as jump-pad as the water gives tux and up-boost when standing on it.
* '''?:''' Give tiles a configurable friction factor and make tux react to it. (for Icy tiles)

=== Optimisations ===

=== Miscellaneous ===
* '''H:''' When going up/down really fast, the camera sometimes can't keep up and tux goes out of the screen on the top
* '''M:''' Make sure levels for version 0.1.2 still work. Currently this isn't the case because some files have been renamed and other small stuff... Our levelmaking fans will be happy if they don't loose the ability to play their old levels.
** For the final release, we should also include a conversion algorithm that upgrades the levels to the new format.
* '''M:''' Tux did go up/down 1 or 2 pixels each step when walking around in the 0.1.x releases which made the walk look a bit more natural. I don't know if this was done intentionally or why it doesn't work anymore, but it would be nice to have this effect again.
* '''L:''' save score on per-level basis to make high-score (this means coins/time)
* '''L:''' the camera does some nasty little jumps if you jumped up on a higher place where the camera didn't completely follow yet and you fall down directly again. This will suddenly raise the camera up.
* '''L:''' Add an option to tilemaps to fade away if tux stands behind tiles. (This is usefull to hide secret ways and entrances)
** For starters, being able to set a tilemap's opacity to 50% would suffice. Layering this semitransparent tilemap on an opaque one would achieve a similar effect
* '''M:''' Support multiple tilesets per level. This way users/modders can easily extend the tileset with by simply adding new .strf files into the data directory.
* '''D:''' think about icebullet specifics
* '''L:''' create more sound effects, see [[User_ideas#Sound_Effects]] for ideas
* '''H:''' ability to jump back at a specific position in a music file on loop (add .music files that describe the behaviour)
* '''L:''' Ability to run scripts that drive the music (ability to jump around the music file)
* '''L:''' Work when no OpenAl support is available
* '''L:''' Create a global random number generator class and use that everywhere in supertux. Also record random seed in demos to make playback reproducible. IMO we shouldn't have random elements in gameplay anyway.
* '''?:''' Show total count of coins collected in all levels on the worldmap
* '''?:''' Show statistics on level completion.

=== Editor ===
* '''H:''' Support for paths
* '''H:''' Support for moving platforms
* '''L:''' Support for entering scripts

== Levels ==
* '''H:''' create 10 or more new levels of different size and complexity, using the new features of milestone 2.

== Graphics ==
* '''H:''' add more forest tiles; some of the current ones need fixing. Also create a ghost forest tileset.
* '''H:''' animations for the [[Yeti]]
* '''H:''' image for castle door with 5 key holes
* '''H:''' new tiles for the forest worldmap
* '''M:''' up and down arrows for infoboxes to signify the possibility to scroll up/down
* '''L:''' graphics for ropes
* '''L:''' graphics for bubbles and soap (not necessary for Milestone 2)
* '''?/D:''' new enemies (first need to be designed)

== Beyond Milestone2 ==

* more things than just levels on the worldmap (similar to SMB3)
