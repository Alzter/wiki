== Introduction ==

If you want to build the current development version on Windows, these step-by-step instructions are for you.

== Warnings ==

Before you proceed, however, carefully read the following warnings:

* You will be building a highly unstable development version of SuperTux. This might cause permanent damage to your system, your brain or both!
* Do not try these instructions out on a production system. Use a virtual machine (e.g. VMWare or [http://www.virtualbox.org/ VirtualBox]) instead.
* Most developers currently focus on getting SuperTux stable for Linux. Feel free to try getting it to work on Windows, but do not expect much support down this road.
* Read these instructions to the end before starting your install. If any step makes you feel unsure, better wait for a Windows release of SuperTux.
* The whole build process takes about one hour to complete, depending on your internet connection and processor power. Why not do something more productive in that hour? Maybe do some housework?
* The build process fails on Windows Vista sometimes. (please open a bug in our [http://supertux.lethargik.org/bugs/ bug tracker] to help us figure out why)

== FastBuild with Visual Studio ==

''This is experimental''
Tested on W7/VS2010 x64

Steps:

* Install Visual Studio
* Download CMake 2.8+
* Open cmake gui
* Set dirs according to your Environment (p.ex.: H:\STuxSVN and H:\STuxSVN\bin)
* Press Configure, select your version of VS (with native compilers) and click on finish
* Now CMake tells you what to do. If asked for any libs, make sure to download and add them to your environment strings

Small List of DLs:
* Boost: BOOST_ROOT: H:\STuxSVN\boost_1_42_0 / BOOST_LIBRARYDIR: $BOOST_ROOT\libs)
* OpenAL: OPENAL_INCLUDE_DIR: D:\Program Files (x86)\OpenAL 1.1 SDK\include
* Ogg Vorbis: VORBIS_INCLUDE_DIR: H:\STuxSVN\libvorbis-1.2.3
* SDLIMAGE: SDLIMAGE_INCLUDE_DIR: H:\STuxSVN\SDL_image-1.2.10\include
* SDL: SDL_INCLUDE_DIR: H:\STuxSVN\SDL-1.2.14

== Preparation ==

OK, enough of that. Here are the exact steps for building SuperTux on a fresh Windows installation:

* Create or pick a working folder. Its path should not contain any spaces. (The root of a drive, such as C:\ or D:\, is fine)
** I chose D:\Build_SuperTux; change the commands to match your choice.
** Every non-absolute path I give is relative to this directory

=== Checking Things Out ===

* We want to check out the latest sources from SVN
* Pick a [http://subversion.tigris.org/getting.html#binary-packages Subversion client]: (instructions vary depending on client)
*# CollabNet binaries require a login, but are very similar to the next option
*#* I chose [http://www.collab.net/servlets/OCNDirector?id=CSVN1.6.6WINS]
*# [http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=8100 Apache 2.2 Binaries]
*#* I chose [http://subversion.tigris.org/files/documents/15/46144/svn-win32-1.6.6.zip svn-win32-1.6.6.zip]
*#* Unpack the binaries to svn
*#* Add subversion to your path
*#** Right click "My Computer" and go to Properties->Advanced->Environment Variables.
*#** Edit or add the PATH variable in either window.
*#** Add a semicolon at the end if not present and type D:\Build_SuperTux\svn\bin at the end.
*#* Open a command prompt (Start->Run and type cmd) and type svn checkout http://supertux.lethargik.org/svn/supertux/trunk/supertux D:\Build_SuperTux\supertux
*# [http://tortoisesvn.tigris.org/ TortoiseSVN] has a nice GUI - try [http://downloads.sourceforge.net/tortoisesvn/TortoiseSVN-1.6.6.17493-win32-svn-1.6.6.msi?download TortoiseSVN-1.6.6.17493-win32-svn-1.6.6.msi]
*#* You must install and reboot to finish the installation (SVN-Options will appear in the right-click menu in the Explorer)
*#* right-click this folder and select "SVN checkout..." from the context menu
*#* As repository URL, enter: http://supertux.lethargik.org/svn/supertux/trunk/supertux
*#* As checkout dir, enter: D:\Build_SuperTux\supertux

* begin your checkout and wait - this might take some time, so to the next step...

=== It's Download Time ===

Download all these to your build directory.

* MinGW and MSYS

http://sourceforge.net/projects/mingw/files/MinGW%20API%20for%20MS-Windows/w32api-3.14/w32api-3.14-mingw32-dev.tar.gz/download

http://sourceforge.net/projects/mingw/files/MSYS%20Base%20System/msys-1.0.11/msysCORE-1.0.11-bin.tar.gz/download

http://sourceforge.net/projects/mingw/files/GNU%20Binutils/binutils-2.20/binutils-2.20-1-mingw32-bin.tar.gz/download

http://sourceforge.net/projects/mingw/files/MinGW%20Runtime/mingwrt-3.16/mingwrt-3.16-mingw32-dll.tar.gz/download

http://sourceforge.net/projects/mingw/files/MinGW%20Runtime/mingwrt-3.16/mingwrt-3.16-mingw32-dev.tar.gz/download

http://sourceforge.net/projects/mingw/files/GCC%20Version%204/Current%20Release_%20gcc-4.4.0/gcc-full-4.4.0-mingw32-bin-2.tar.lzma/download (rather large)

* OpenSSH (for committing)

http://sourceforge.net/projects/mingw/files/MSYS%20openssh/openssh-4.7p1-2/openssh-4.7p1-2-msys-1.0.11-bin.tar.lzma/download

http://sourceforge.net/projects/mingw/files/MSYS%20openssl/openssl-0.9.8k-1/libopenssl-0.9.8k-1-msys-1.0.11-dll-098.tar.lzma/download

http://sourceforge.net/projects/mingw/files/MSYS%20minires/minires-1.02_1-1/libminires-1.02_1-1-msys-1.0.11-dll.tar.lzma/download

http://sourceforge.net/projects/mingw/files/MinGW%20zlib/zlib-1.2.3-1-mingw32/libz-1.2.3-1-mingw32-dll-1.tar.gz/download

* Bison and Flex (for miniswig)

http://sourceforge.net/projects/mingw/files/MSYS%20bison/bison-2.4.1-1/bison-2.4.1-1-msys-1.0.11-bin.tar.lzma/download

http://sourceforge.net/projects/mingw/files/MSYS%20flex/flex-2.5.35-1/flex-2.5.35-1-msys-1.0.11-bin.tar.lzma/download

http://sourceforge.net/projects/mingw/files/MSYS%20regex/regex-1.20090805-1/libregex-1.20090805-1-msys-1.0.11-dll-1.tar.lzma/download

* Gettext (for translations)

http://sourceforge.net/projects/mingw/files/MinGW%20gettext/gettext-0.17-1/libintl-0.17-1-mingw32-dll-8.tar.lzma/download

http://sourceforge.net/projects/mingw/files/MinGW%20libiconv/libiconv-1.13.1-1/libcharset-1.13.1-1-mingw32-dll-1.tar.lzma/download

http://sourceforge.net/projects/mingw/files/MinGW%20libiconv/libiconv-1.13.1-1/libiconv-1.13.1-1-mingw32-dll-2.tar.lzma/download

http://sourceforge.net/projects/mingw/files/MinGW%20gettext/gettext-0.17-1/libgettextpo-0.17-1-mingw32-dll-0.tar.lzma/download

http://sourceforge.net/projects/mingw/files/MinGW%20gettext/gettext-0.17-1/gettext-0.17-1-mingw32-bin.tar.lzma/download

http://sourceforge.net/projects/mingw/files/MinGW%20gettext/gettext-0.17-1/gettext-0.17-1-mingw32-dev.tar.lzma/download

*[http://cmake.org/cmake/resources/software.html CMake]

http://www.cmake.org/files/v2.8/cmake-2.8.0-win32-x86.zip

* [http://curl.haxx.se/downloads.html cURL] (add-on manager)

http://www.gknw.net/mirror/curl/win32/curl-7.19.7-devel-mingw32.zip

* [http://www.libsdl.org/download-1.2.php SDL] graphics library

http://www.libsdl.org/release/SDL-devel-1.2.14-mingw32.tar.gz

* [http://glew.sourceforge.net/ GLEW] graphics library

http://sourceforge.net/projects/glew/files/glew/1.5.1/glew-1.5.1-win32.zip/download

* [http://www.libsdl.org/projects/SDL_image/ SDL_image] for loading graphics

http://www.libsdl.org/projects/SDL_image/release/SDL_image-devel-1.2.10-VC.zip

* [http://icculus.org/physfs/downloads/ PhysFS] file management

http://icculus.org/physfs/downloads/physfs-2.0.0.tar.gz

* [http://www.boost.org/ Boost]

http://sourceforge.net/projects/boost/files/boost/1.41.0/boost_1_41_0.7z/download

* [http://www.7-zip.org/ 7-zip] for your favorite extraction program

http://downloads.sourceforge.net/sevenzip/7z465.exe

* [http://connect.creativelabs.com/openal/Downloads/Forms/AllItems.aspx OpenAL], for all your OggVorbis needs

http://connect.creativelabs.com/openal/Downloads/OpenAL11CoreSDK.zip

=== Getting Busy ===
* Run the 7-zip and OpenAL SDK installers. (OpenAL requires administrative privileges)
* Select everything else you downloaded, right click, and select "Extract here". Repeat with the generated *.tar files. Answer "no to all" when prompted to overwrite.
* Make a folder <code>local</code> to hold libraries
* Copy bin, include, lib, and share folders from cmake, curl, SDL, SDL_image, and glew folders
* Go to C:\Program Files\OpenAL 1.1 SDK
* Copy the include directory there to local
* Copy \samples\playoggvorbis\include\Ogg and \samples\playoggvorbis\include\Vorbis to local\include
* Copy the Ogg and Vorbis DLL's in \samples\playoggvorbis\Win32 to local\bin
* Go to C:\WINDOWS\system32 (%SYSTEMROOT%\system32)
* Copy OpenAL32.dll and wrap_oal.dll to local\bin
** If they aren't there, try running C:\Program Files\OpenAL 1.1 SDK\redist\oalinst.exe

== Building ==

* PhysFS 2.0.0 needs a patch to make it compile without warnings under Windows. Change
 IF(PHYSFS_IS_GCC4)
   ADD_DEFINITIONS(-fvisibility=hidden)
 ENDIF(PHYSFS_IS_GCC4)
to
 IF(PHYSFS_IS_GCC4 AND NOT WINDOWS)
   ADD_DEFINITIONS(-fvisibility=hidden)
 ENDIF(PHYSFS_IS_GCC4 AND NOT WINDOWS)
in /phyfs-2.0.0/CMakeLists.txt
* We're ready to build PhysFS.
* Launch MSYS with msys.bat and type in the following: (you can paste into MSYS using the icon in the title bar)
 cd /physfs*
 mkdir build
 cd build
 cmake .. -G "MSYS Makefiles" -DCMAKE_INSTALL_PREFIX:PATH=/local
 make
 make install
* We're ready to build SuperTux.
* Change to the SuperTux checkout directory
 cd /supertux
* Make a build directory to store generated files
 mkdir build
 cd build
* Start the actual build (everything else was libraries)
 INCLUDE="/local/include/SDL:/boost_1_41_0" cmake -G"MSYS Makefiles" -DDEBUG=ON -DCMAKE_BUILD_TYPE=Debug ..
 make
* You need to copy some dll's from /local/bin, /local/lib, and /bin into /supertux. 
 cd ..
 cp /local/bin/*.dll .
 cp /local/lib/*.dll .
 cp /bin/*.dll .
A lot of these are unnecessary; use objdump -p or strings to prune the tree.
* Now run supertux2.exe, sit back, and enjoy the game.
 cd /supertux
 ./supertux2.exe

== Building the editor ==

There's a new gtk-sharp based editor in development which can also be built on windows. To do so you first have to get and install the following dependencies:
=== Dependencies ===
* Make sure you have OpenGL drivers installed
* Microsoft .NET 1.X framework SDK, you should be able to get this here: http://www.microsoft.com/downloads/details.aspx?FamilyID=9b3a2ca6-3647-4070-9f41-a333c6b9181d&DisplayLang=en
* Microsoft .NET 2.X framework SDK, yes you need 1.x AND 2.x at the moment!: http://www.microsoft.com/downloads/details.aspx?familyid=FE6F2099-B7B4-4F47-A244-C96D69C35DEC&displaylang=en
* Gtk-Sharp 2.7 SDK for windows, make sure you actually get the SDK the runtime version contains some bugs that affect the editor: http://forge.novell.com/modules/xfcontent/private.php/gtks-inst4win/Win32%20Installer/v2.7.1/gtksharp-2.7.1-win32-0.5.exe
* Microsoft Visual C# Express Edition, it's a free version of visual studio and we use it for compiling (and development on win32): http://msdn.microsoft.com/vstudio/express/visualcsharp/download 
*:This apparently requires SP2 on Windows XP. (not tested on any other Windows versions)
* SDL.dll and SDL_image.dll, you can get these from an existing SuperTux installation or from the downloads above.

=== Building ===

* Get the sourcecode from [[Download/Subversion|svn]]
* Open supertux-sharp.sln by double clicking on it.
* Build the project in debug and release mode (use F6 and then F5 for example)
* Copy SDL.dll and SDL_image.dll into the bin\Debug and bin\Release directory that has just been created
* You can now go back to Visual Studio Express and start the editor with F11. Note that the debug mode is quite slow for the OpenGL calls, so if you actually want to use the editor instead of developing it start it in release mode (CTRL+F11)

You might want to read the [[Editor FAQ]] at this point.

=== Snapshots ===
MMLosh has some snapshots on his website: http://elektromaniak.wz.cz/download.html
Note that because Mono is cross-platform, the executables should work on both Windows and Linux, though libraries can be a problem.

[[Category:Developer documentation]]
